###å‰è¨€
æœ€è¿‘é‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå¦‚ä¸‹
![](http://upload-images.jianshu.io/upload_images/1049769-eaa10726a7104222.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
åœ¨è§£å†³è¿‡ç¨‹ä¸­ï¼Œå›é¡¾äº†å¾ˆå¤šçŸ¥è¯†ï¼Œäºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚
å…³é”®è¯ï¼š**é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–ã€é“¾æ¥ã€åŠ¨æ€é“¾æ¥åº“ã€é™æ€é“¾æ¥åº“ã€çœŸæœºè°ƒè¯•**ã€‚

###æ­£æ–‡
ä»¥.cæ–‡ä»¶çš„ç¼–è¯‘æµç¨‹ä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾ã€‚
æˆ‘ä»¬æŒ‰ç…§ä»¥ä¸‹çš„æ­¥éª¤ï¼Œç”¨gccå¯¹ä»£ç è¿›è¡Œç¼–è¯‘ã€‚
![ç¼–è¯‘æµç¨‹å›¾](http://upload-images.jianshu.io/upload_images/1049769-46e925867b626a2d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
test.cçš„ä»£ç å¦‚ä¸‹
```
#include <stdio.h>
int main()
{
    puts("It's OK.");
	return 0;
}
```
####gccæŒ‡ä»¤å¤„ç†
 * é¢„å¤„ç†
````
gcc -E test.c -o test.i
```
 * ç¼–è¯‘
```
gcc -S test.i -o test.s
```
 * æ±‡ç¼–
```
gcc -c test.s -o test.o
```
 * é“¾æ¥
```
gcc test.o -o test
```

>æŒ‡ä»¤è§£é‡Š
-E                      Only run the preprocessor
-S                      Only run preprocess and compilation steps
-c                      Only run preprocess, compile, and assemble steps
-o <file>               Write output to <file>

####é™æ€è¿æ¥ä¸åŠ¨æ€é“¾æ¥
#####1ã€é™æ€é“¾æ¥
é™æ€è¿æ¥å°±æ˜¯æŠŠé™æ€è¿æ¥åº“ï¼ˆ.aæ–‡ä»¶ï¼‰ä¸­çš„æ–‡ä»¶é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼›
>.aæ–‡ä»¶æ˜¯å¤šä¸ª.oæ–‡ä»¶çš„ç»„åˆï¼›
.oæ–‡ä»¶æ˜¯å¯¹è±¡æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯æœºå™¨æŒ‡ä»¤ï¼›
é“¾æ¥å°±æ˜¯å¤šä¸ª.oæ–‡ä»¶æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼›

#####2ã€åŠ¨æ€é“¾æ¥
åŠ¨æ€é“¾æ¥å°±æ˜¯ä»…åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­åŠ å…¥ç›¸å…³æè¿°æ–‡ä»¶ï¼Œæ‰§è¡Œæ—¶å†åŠ¨æ€åŠ è½½ç›¸åº”çš„åŠ¨æ€é“¾æ¥åº“ï¼›
#####3ã€é“¾æ¥è¿‡ç¨‹
é“¾æ¥çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯**ç¬¦å·é‡å®šä½**ã€‚
c/c++ ç¨‹åºçš„ç¼–è¯‘æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½è¿›è¡Œçš„ï¼Œå› æ­¤æ¯ä¸ª c/cpp æ–‡ä»¶ä¹Ÿå«ä½œä¸€ä¸ªç¼–è¯‘å•å…ƒ(translation unit), æºæ–‡ä»¶å…ˆæ˜¯è¢«ç¼–è¯‘æˆä¸€ä¸ªä¸ªç›®æ ‡æ–‡ä»¶, å†ç”±é“¾æ¥å™¨æŠŠè¿™äº›ç›®æ ‡æ–‡ä»¶ç»„åˆæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“ï¼Œé“¾æ¥çš„è¿‡ç¨‹ï¼Œå…¶æ ¸å¿ƒå·¥ä½œæ˜¯è§£å†³æ¨¡å—é—´å„ç§ç¬¦å·(å˜é‡ï¼Œå‡½æ•°)ç›¸äº’å¼•ç”¨çš„é—®é¢˜ï¼Œå¯¹ç¬¦å·çš„å¼•ç”¨æœ¬è´¨æ˜¯å¯¹å…¶åœ¨å†…å­˜ä¸­å…·ä½“åœ°å€çš„å¼•ç”¨ï¼Œå› æ­¤ç¡®å®šç¬¦å·åœ°å€æ˜¯ç¼–è¯‘ï¼Œé“¾æ¥ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­ä¸€é¡¹ä¸å¯ç¼ºå°‘çš„å·¥ä½œï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç¬¦å·é‡å®šä½ã€‚**æœ¬è´¨ä¸Šæ¥è¯´ï¼Œç¬¦å·é‡å®šä½è¦è§£å†³çš„æ˜¯å½“å‰ç¼–è¯‘å•å…ƒå¦‚ä½•è®¿é—®ã€Œå¤–éƒ¨ã€ç¬¦å·è¿™ä¸ªé—®é¢˜ã€‚**
>æ­¤æ®µå¼•ç”¨è‡ª[linux ä¸‹åŠ¨æ€é“¾æ¥å®ç°åŸç†](http://www.cnblogs.com/catch/p/3857964.html)ï¼Œæœ‰æ›´è¯¦ç»†çš„åŸç†ä»‹ç»ã€‚

###iOSç›¸å…³
ä¸‹å›¾æ˜¯æˆ‘ä»¬Xcodeå·¥ç¨‹çš„è®¾ç½®ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€è§£æã€‚
![](http://upload-images.jianshu.io/upload_images/1049769-e18df792c5c9ab2f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**Embedded Binaries**
 * GPUImage.framework
 * lib.framework

è¿™ä¸¤ä¸ªæ˜¯åŠ¨æ€åº“ï¼Œframeworkçš„å†…å®¹æ ¼å¼å¦‚ä¸‹
![](http://upload-images.jianshu.io/upload_images/1049769-177c3c22f69b31c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**Linked Frameworks and Libraries**
 * libstdc++.6.tbd 
tbdæ˜¯dylibçš„ä¼˜åŒ–ç‰ˆæœ¬
>å®˜æ–¹çš„è§£é‡Šï¼šthe .tbd files are new "text-based stub libraries", that provide a much more compact version of the stub libraries for use in the SDK, and help to significantly reduce its download size
 * libXG-SDK.a
ä¿¡é¸½æ¨é€çš„é™æ€é“¾æ¥åº“
 * lib*.frameworkã€GPUImage.framework
ç›´æ’­çš„frameworkå’ŒGPUImage
 * libPods-Live.a
CocoaPodsç®¡ç†å¹¶ç”Ÿæˆçš„é™æ€é“¾æ¥åº“
>åœ¨Build Phasesçš„è®¾ç½®é‡Œé¢
Check Pods Manifest.lock è®¾ç½®çš„è„šæœ¬ä¼šæ£€æŸ¥Podfile.lock å’Œ Manifest.lock çš„å·®å¼‚ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°pod install
Embed Pods Frameworksã€Copy Pods Resources æ˜¯å¦å¤–ä¸¤ä¸ªè„šæœ¬

äº†è§£å®Œå·¥ç¨‹çš„åŸºæœ¬è®¾ç½®åï¼Œæˆ‘ä»¬æ¥å®šä½å‰é¢æåˆ°çš„é—®é¢˜ã€‚
è¿›è¡Œçš„æ“ä½œæ˜¯Archive -> Export -> Ad Hocï¼Œæç¤ºçš„é”™è¯¯ä¿¡æ¯æ˜¯
`Found an unexpected Mach-O header code`.
ç‚¹å‡»show logsï¼Œç„¶åé€‰æ‹©standard.log
![](http://upload-images.jianshu.io/upload_images/1049769-396c977ff00f138c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
logçš„æè¿°æ˜¯`did not contain a "archived-expanded-entitlements.xcent" resource`ã€‚
>è¿™ä¸ªé—®é¢˜åœ¨[stackoverflow](http://stackoverflow.com/questions/26559948/found-an-unexpected-mach-o-header-code-1918975009-in-xcode-6)ä¹Ÿæœ‰äººæé—®è¿‡ï¼Œä½†æ˜¯ä¸æ˜¯æˆ‘é‡åˆ°çš„æƒ…å†µã€‚
soç»™å‡ºçš„å»ºè®®æ˜¯ï¼š
Go to BUILD PHASES -> COPY BUNDLE RESOURCES, you will find there some framework. Remove from this section and add it to LINK BINARY WITH LIBRARIES. It will work..

æ£€æŸ¥å·¥ç¨‹çš„è®¾ç½®ï¼Œå‘ç°æ˜¯åŒäº‹æŠŠä¸€ä¸ªé™æ€åº“æ”¾åˆ°äº†**Embedded Binaries**é¡¹é‡Œé¢ï¼Œç„¶è€Œé™æ€åº“æ˜¯ä¸èƒ½æ‰“åŒ…åˆ°ipaé‡Œé¢ã€‚ï¼ˆé™æ€åº“é‡Œçš„ä»£ç ä¼šç¼–è¯‘é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œèµ„æºæ–‡ä»¶éœ€è¦é‡æ–°æ‰“åŒ…æˆä¸€ä¸ªbundleæ–‡ä»¶æ”¾å…¥ipaåŒ…ï¼‰
>æ€è€ƒé¢˜ğŸ¤”ï¼šCocoaPodså¾ˆå¤šç¬¬ä¸‰æ–¹åº“æ˜¯åŒ…æ‹¬UIèµ„æºçš„ï¼Œç„¶è€Œæˆ‘ä»¬çŸ¥é“.aæ–‡ä»¶æ˜¯ä¸åŒ…æ‹¬èµ„æºçš„ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹åº“çš„èµ„æºå¦‚ä½•å¤„ç†çš„ï¼Ÿ

###åŠ¨æ€åº“ã€é™æ€åº“çš„åˆ¶ä½œ
ç®€ä¹¦å·²ç»æœ‰éå¸¸è¯¦ç»†çš„æ•™ç¨‹ï¼Œä»‹ç»[é™æ€åº“å’ŒåŠ¨æ€åº“çš„åˆ¶ä½œ](http://www.jianshu.com/p/42070c513104)ã€‚

###Debugè°ƒè¯•
ä¸Šæ¶AppStoreçš„åº”ç”¨ï¼Œåœ¨Xcodeå°±å¯ä»¥æŸ¥çœ‹çº¿ä¸Šçš„crashä¿¡æ¯ã€‚
ä½†æœ‰æ—¶å€™ï¼ŒçœŸæœºè°ƒè¯•çš„å‡ºç°é—ªé€€ï¼Œæˆ‘ä»¬é€šè¿‡Xcodeè¯»å–çœŸæœºçš„crashæ—¥å¿—ï¼Œå‘ç°æ—¥å¿—æ˜¯è¿™æ ·çš„ï¼š
![](http://upload-images.jianshu.io/upload_images/1049769-5774b1e7e9cebf40.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æä¾›çš„æ˜¯ï¼Œcrashæ—¶å€™çš„åœ°å€ä¿¡æ¯ã€‚
æˆ‘ä»¬çŸ¥é“ï¼Œç¼–è¯‘æ—¶æœŸå‡½æ•°çš„åœ°å€å°±å·²ç»ç¡®å®šï¼Œé‚£ä¹ˆæ ¹æ®åœ°å€ä¿¡æ¯åº”è¯¥æ˜¯èƒ½å®šä½åˆ°å‡½æ•°ã€‚
>å½“æŠŠObjective-Cä»£ç ç¼–è¯‘æˆæ±‡ç¼–ã€å†è½¬è¯‘æˆäºŒè¿›åˆ¶æœºå™¨ç åï¼Œä¼šç”Ÿæˆä¸€ä¸ªdSYMæ–‡ä»¶åŒ…ï¼ˆå†…å«ç¬¦å·è¡¨ï¼Œè´Ÿè´£ç¿»è¯‘å´©æºƒæŠ¥å‘Šæˆå¯è¯»ä»£ç ï¼‰ã€‚.dSYMæ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•ï¼ŒåŒ…å«ä¸€ä¸ªåå…­è¿›åˆ¶çš„å‡½æ•°åœ°å€æ˜ å°„ä¿¡æ¯çš„æ–‡ä»¶ï¼ŒDebugçš„symbolséƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­(åŒ…æ‹¬æ–‡ä»¶åã€å‡½æ•°åã€è¡Œå·ç­‰)ã€‚Xcodeé¡¹ç›®æ¯æ¬¡ç¼–è¯‘åï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„.dSYMæ–‡ä»¶ï¼Œæ•…è€ŒçœŸæœºä¸Šçš„å´©æºƒæ—¥å¿—éœ€è¦æ£€æŸ¥å¯¹åº”çš„ç¬¦å·è¡¨ã€‚

[APPLE](https://developer.apple.com/library/content/technotes/tn2151/_index.html)çš„å®˜ç½‘ä»‹ç»äº†ä¸€ä¸ªæŒ‡ä»¤:
```
// è®°å¾—æŠŠliveæ”¹æˆä½ å¯¹åº”çš„åŒ…å
atos -o live.app/live -arch arm64 0x1000d51c0 -l 0x100064000
```
æ‰“å¼€å®‰è£…åˆ°çœŸæœºçš„.appæ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ ¼å¼è¾“å…¥crashæ—¶å€™çš„åœ°å€ä¿¡æ¯å³å¯ã€‚
å¦‚æœå‘ç°å‡ºæ¥çš„æ˜¯ä¸€ä¸ªæ¯«ä¸ç›¸å…³çš„å‡½æ•°ï¼Œç”¨`dwarfdump --uuid live.app/live` æŒ‡ä»¤ç¡®å®šä¸‹Binary Imagesæ˜¯å¦å’Œcrashä¸€è‡´ã€‚


###æ€»ç»“
åœ¨å†™æ–‡ç« è¿‡ç¨‹ä¸­ï¼Œç®€å•å¤ä¹ äº†ä¸‹ç¼–è¯‘åŸç†ä¸æ±‡ç¼–è¯­è¨€ï¼Œæ·±æ„Ÿç¨‹åºå‘˜çš„æŠ€èƒ½æ ‘å¤ªè¿‡åºå¤§ï¼Œéšä¾¿ä¸€ä¸ªåˆ†æ”¯å°±å¤Ÿå­¦ä¹ ä¸€è¾ˆå­ã€‚
å¹³æ—¶å¼€å‘é‡åˆ°é—®é¢˜ï¼Œä¹ æƒ¯æ€§çš„åˆ¨æ ¹é—®åº•ï¼Œè¿™æ¬¡ç®€å•æŠŠè¿™äº›çŸ¥è¯†ä¸²è”èµ·æ¥ï¼Œå¹¶å’Œå·¥ç¨‹ä½œç›¸åº”ç»“åˆï¼ŒåŠ æ·±è®°å¿†ã€‚
æ–‡ç« å¦‚æœ‰ç–æ¼ï¼Œæ•¬è¯·æŒ‡å‡ºã€‚


####å¼•ç”¨
 * [ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»â€”é“¾æ¥ã€è£…è½½ä¸åº“ã€‹](https://www.amazon.cn/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB-%E9%93%BE%E6%8E%A5-%E8%A3%85%E8%BD%BD%E4%B8%8E%E5%BA%93-%E6%BD%98%E7%88%B1%E6%B0%91/dp/B0027VSA7U/ref=sr_1_1?ie=UTF8&qid=1481878780&sr=8-1&keywords=%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E2%80%94%E9%93%BE%E6%8E%A5%E3%80%81%E8%A3%85%E8%BD%BD%E4%B8%8E%E5%BA%93)
 * [Cç¨‹åºç¼–è¯‘è¿‡ç¨‹æµ…æ](http://smilejay.com/2012/01/c_compilation_stages/)